<div class="flex h-screen bg-cover bg-center font-montserrat">
    <!-- Sidebar for conversation history -->
    <div *ngIf="sidebarVisible" class="w-1/5 bg-gray-100 p-4 overflow-y-auto border-r border-[#404040]">
        <div class="flex justify-between mb-4">
            <!-- Toggle Icon -->
            <fa-icon 
                [icon]="sidebarToggleIcon" 
                class="text-customGray text-2xl cursor-pointer hover:text-customBlue transition duration-200" 
                (click)="toggleSidebar()">
            </fa-icon>
            
            <!-- New Conversation Icon -->
            <fa-icon 
                [icon]="newConversationIcon" 
                class="text-customGray text-2xl cursor-pointer hover:text-customBlue transition duration-200" 
                (click)="startNewConversation()">
            </fa-icon>
        </div>
    </div>

    <div 
        [ngClass]="{ 'w-full': !sidebarVisible, 'w-4/5': sidebarVisible }" 
        class="flex flex-col p-8 transition-all duration-300"
    >
        <div class="flex items-center justify-between mb-4">
            <h1 class="text-2xl font-semibold font-archivo text-customGray">CyberGuard</h1>
            <div class="flex items-center">
                <!-- Toggle Icon -->
                <fa-icon 
                    *ngIf="!sidebarVisible" 
                    [icon]="sidebarToggleIcon" 
                    class="text-customGray text-2xl cursor-pointer hover:text-customBlue transition duration-200" 
                    (click)="toggleSidebar()">
                </fa-icon>

                <!-- New Conversation Icon -->
                <fa-icon 
                    *ngIf="!sidebarVisible" 
                    [icon]="newConversationIcon" 
                    class="text-customGray text-2xl cursor-pointer hover:text-customBlue transition duration-200" 
                    (click)="startNewConversation()">
                </fa-icon>
            </div>
        </div>
        
        <div class="flex-grow mb-8 p-4 overflow-y-auto scrollbar-custom">
            <div class="space-y-4">
                <div *ngFor="let message of messages" class="flex {{ message.isUser ? 'justify-end' : 'justify-start' }}">
                    <div class="max-w-xs w-fit">
                        <div class="rounded-3xl p-4 shadow-md {{ message.isUser ? 'bg-customBlue' : 'bg-gray-100' }}">
                            <p class="text-gray-800">{{ message.text }}</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="flex-shrink-0 p-2 border-t bg-gray-100 rounded-3xl">
            <div class="flex">
                <input 
                    type="text" 
                    [(ngModel)]="userInput" 
                    (keyup.enter)="sendMessage()" 
                    placeholder="Message CyberGuard" 
                    class="flex-grow rounded-lg bg-transparent py-2 px-4 mr-2 focus:outline-none" 
                />
                <button (click)="sendMessage()" class="bg-customBlue text-black rounded-3xl px-4 py-2 mr-2 shadow-md hover:bg-[#48e8f0] transition duration-200">
                    <fa-icon [icon]="sendIcon"></fa-icon>
                </button>
            </div>
        </div>
    </div>
</div>
